(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[878],{59744:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return s0}});var r,l=t(85893),a=t(40416),i=t(90450),n=t(96322),c=t(63663),o=t(89250),d=t(36581),x=t(80227),u=t(60888),j=t(78317),h=t(93640),m=t(56693),p=t(63094),g=t(75071),v=t(21075),b=t(48571),y=t(30603),f=t(33213),A=t(57456),I=t(62751),w=t(49933),k=t(39851),T=t(43322),C=t(74011);let N=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"name",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsx)(T.o,{source:"description",fullWidth:!0})]}),P=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(N,{})}),Z=()=>(0,l.jsx)(f.Py,{children:(0,l.jsx)(N,{})});var O=t(97032),W=t(39797),D=t(73850),S=t(18123),F=t(75214),R=t(81252),B=t(25482),E=t(96996),q=t(97005),L=t(66252),M=t(96540);let U=e=>{let{hasFilters:s,hasBulkCreate:t}=e,r=(0,F.K)(),a=(0,R.e)();return console.log(r({resource:a,type:"edit"})),(0,l.jsxs)(B.Q,{children:[s&&(0,l.jsx)(E.L,{}),(0,l.jsx)(q.Z,{}),t&&(0,l.jsx)(L.z,{label:"Bulk Create",startIcon:(0,l.jsx)(M.Z,{}),href:"#/bulk-create/".concat(a)})]})},z=[(0,l.jsx)(T.o,{label:"Search by name",source:"q",alwaysOn:!0},"search")],H=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:z,children:(0,l.jsxs)(W.c,{rowClick:"edit",bulkActionButtons:!1,children:[(0,l.jsx)(D.n,{source:"name"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})});var _=t(67294),J=t(89612),K=t(67023),G=t(15861),V=t(25675),Y=t.n(V);let X=e=>(0,l.jsxs)(K.x,{...e,sx:{color:"white"},children:[(0,l.jsx)(G.Z,{variant:"h6",color:"inherit",id:"react-admin-title"}),(0,l.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{style:{display:"flex",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:(0,l.jsx)(Y(),{priority:!0,src:"/images/total-rehab-logo.png",alt:"Total Rehab logo",width:175,height:25})})})]}),Q=e=>(0,l.jsx)(J.A,{...e,appBar:X});var $=t(28421),ee=t(95486),es=t(10536),et=t(57290);let er=e=>{let{source:s,reference:t,itemSource:r}=e;return(0,l.jsx)(es.je,{source:s,reference:t,children:"string"==typeof r?(0,l.jsx)(D.n,{source:r}):(0,l.jsx)(et.J,{render:r})})},el=[(0,l.jsx)(T.o,{label:"Search by name",source:"q",alwaysOn:!0},"search"),(0,l.jsx)($.D,{source:"modalityId",reference:"modalities",children:(0,l.jsx)(ee.P,{label:"Modality",optionText:"name"})},"modality")],ea=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:el,children:(0,l.jsxs)(W.c,{rowClick:"edit",bulkActionButtons:!1,children:[(0,l.jsx)(D.n,{source:"name"}),(0,l.jsx)(er,{source:"modalityId",reference:"modalities",itemSource:"name"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})});var ei=t(83983),en=t(25417);let ec=e=>(0,l.jsx)(en.E,{parse:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>"number"==typeof e?{id:e}:e)},format:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>"number"==typeof e?e:e.id)},...e});var eo=t(2734),ed=t(87357);let ex=e=>{let{children:s}=e,{spacing:t}=(0,eo.Z)();return(0,l.jsx)(ed.Z,{sx:{display:"flex",flex:1,width:"100%",gap:t(4),flexDirection:{xs:"column",lg:"row"},alignItems:"center"},children:s})},eu=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"name",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsx)(T.o,{source:"description",fullWidth:!0}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(k.nW,{source:"videoId",label:"Video"}),(0,l.jsx)(k.nW,{source:"heroImageId",label:"Hero Image"}),(0,l.jsx)(k.nW,{source:"thumbnailImageId",label:"Thumbnail Image"})]}),(0,l.jsx)($.D,{label:"Activity",source:"modalityId",reference:"modalities",children:(0,l.jsx)(ee.P,{optionText:"name",fullWidth:!0,validate:(0,C.C1)()})}),(0,l.jsx)(ei.u,{source:"equipment",reference:"equipment",children:(0,l.jsx)(ec,{fullWidth:!0,label:"Equipment",optionText:"name"})}),(0,l.jsx)(f.vA,{source:"instructions"}),(0,l.jsx)(f.vA,{source:"tips",addButtonText:"Add tip"})]}),ej=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(eu,{})}),eh=()=>(0,l.jsx)(f.Py,{queryOptions:{meta:{include:{equipment:!0}}},children:(0,l.jsx)(eu,{})});var em=t(94889),ep=t(14943),eg=t(12821),ev=t(87918);let eb=[(0,l.jsx)(T.o,{label:"Search by title",source:"q",alwaysOn:!0},"search"),(0,l.jsx)(em.l,{source:"activityLevel",choices:[{id:"LIGHT",name:"Light"},{id:"MODERATE",name:"Moderate"},{id:"INTENSIVE",name:"Intensive"}]},"activityLevel"),(0,l.jsx)(ep.K,{label:"Over 60s",source:"isForOver60s"},"over60s"),(0,l.jsx)(ep.K,{source:"published"},"published")],ey=()=>{let e=(0,eo.Z)();return(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:eb,children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(eg.I,{label:"Over 60s",source:"isForOver60s",textAlign:"center"}),(0,l.jsx)(et.J,{label:"Activity Levels",textAlign:"center",render:s=>(0,l.jsx)(ev.Z,{label:(0,w.G)(s.activityLevel),sx:{margin:e.spacing(.5)}},s.activityLevel)}),(0,l.jsx)(eg.I,{source:"published",textAlign:"center"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})})};var ef=t(98694),eA=t(77333),eI=t(71891),ew=t(33101),ek=t(29002),eT=t(80497),eC=t(55378),eN=t(59636),eP=t(78462),eZ=t(70891),eO=t(59334),eW=t(25464),eD=t(18972),eS=t(11496),eF=t(41796),eR=t(45111),eB=t(86010);let eE=[{label:"Normal",value:"paragraph"},{label:"Heading 1",value:"heading",level:2},{label:"Heading 2",value:"heading",level:3},{label:"Heading 3",value:"heading",level:4},{label:"Heading 4",value:"heading",level:5}],eq="RaRichTextInputTextLevelSelect",eL={list:"".concat(eq,"-list"),sizeSmall:"".concat(eq,"-sizeSmall"),sizeLarge:"".concat(eq,"-sizeLarge")},eM=(0,eS.ZP)("div")(e=>{let{theme:s}=e;return{border:"1px solid ".concat(s.palette.grey[300]),borderRadius:s.shape.borderRadius,["&.".concat(eL.list)]:{borderRadius:s.shape.borderRadius,border:"1px solid ".concat((0,eF.Fq)(s.palette.action.active,.12))},["& .".concat(eL.sizeSmall)]:{paddingTop:1,paddingBottom:1,"& .MuiTypography-root":{fontSize:s.typography.pxToRem(13)}},["& .".concat(eL.sizeLarge)]:{paddingTop:8,paddingBottom:8,"& .MuiTypography-root":{fontSize:s.typography.pxToRem(15)}}}}),eU=e=>{let s=(0,eN.w)(),[t,r]=(0,_.useState)(null),{size:a}=e,[i,n]=(0,_.useState)(eE[0]),c=(e,t)=>{r(null);let l=eE[t];"paragraph"===l.value?s.chain().focus().setParagraph().run():"heading"===l.value&&s.chain().focus().setHeading({level:l.level}).run()},o=e=>{r(e.currentTarget)},d=()=>{r(null)};return(0,_.useEffect)(()=>{let e=()=>{n(e=>eE.reduce((e,t)=>s&&("paragraph"===t.value&&s.isActive("paragraph")||s.isActive("heading",{level:t.level}))?t:e,e))};return s&&(s.on("update",e),s.on("selectionUpdate",e)),()=>{s&&(s.off("update",e),s.off("selectionUpdate",e))}},[s]),(0,l.jsxs)(eM,{children:[(0,l.jsx)(eP.Z,{component:"nav","aria-label":"Select the level",dense:!0,disablePadding:!0,className:eL.list,children:(0,l.jsxs)(eZ.ZP,{button:!0,"aria-haspopup":"true","aria-controls":"level-menu","aria-label":"Current level",disabled:!(null==s?void 0:s.isEditable),onClick:o,className:(0,eB.Z)({[eL.sizeSmall]:"small"===a,[eL.sizeLarge]:"large"===a}),children:[(0,l.jsx)(eO.Z,{primary:i.label}),(0,l.jsx)(eR.Z,{})]})}),(0,l.jsx)(eW.Z,{anchorEl:t,open:Boolean(t),id:"level-menu",onClose:d,children:eE.map((e,s)=>(0,l.jsx)(eD.Z,{selected:e===i,onClick:e=>{c(e,s)},children:e.label},e.label))})]})},ez=e=>(0,l.jsx)(eI.O,{...e,className:"prose max-w-none",toolbar:(0,l.jsx)("div",{style:{alignSelf:"flex-start"},children:(0,l.jsxs)(ew.A,{children:[(0,l.jsx)(eU,{}),(0,l.jsx)(ek.O,{}),(0,l.jsx)(eT.g,{}),(0,l.jsx)(eC.$,{})]})})}),eH=(e,s)=>{let t=s.phases.map(e=>{let{phaseId:s}=e;return s}),r=t.filter((e,s)=>t.indexOf(e)!==s);if(r.includes(e))return"A phase should only be used once per program"},e_=()=>{let{spacing:e}=(0,eo.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"title",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(k.nW,{source:"heroImageId",label:"Hero Image"}),(0,l.jsx)(k.nW,{source:"thumbnailImageId",label:"Thumbnail Image"})]}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(em.l,{source:"activityLevel",validate:[(0,C.C1)()],choices:[{id:"LIGHT",name:"Light"},{id:"MODERATE",name:"Moderate"},{id:"INTENSIVE",name:"Intensive"}]}),(0,l.jsx)(ep.K,{label:"Is over 60s program",source:"isForOver60s"})]}),(0,l.jsx)(f.vA,{source:"features",addButtonText:"Add feature"}),(0,l.jsx)(ef.qt,{source:"phases",sx:{marginBottom:e(4)},children:(0,l.jsxs)(f.vs,{inline:!0,addButtonText:"Add phase",children:[(0,l.jsx)($.D,{source:"phaseId",reference:"phases",children:(0,l.jsx)(ee.P,{fullWidth:!0,label:"Phase",optionText:"name",validate:[(0,C.C1)(),eH]})}),(0,l.jsx)(eA.Y,{fullWidth:!0,source:"durationInWeeks",validate:[(0,C.C1)()]})]})}),(0,l.jsx)(ez,{source:"content",fullWidth:!0}),(0,l.jsx)(ep.K,{source:"published",helperText:"Programs that are not published will not appear in the app."})]})},eJ=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(e_,{})}),eK=()=>(0,l.jsx)(f.Py,{queryOptions:{meta:{include:{phases:!0}}},children:(0,l.jsx)(e_,{})});var eG=t(22145),eV=t(58001),eY=t(9966),eX=t(81081),eQ=t(33311);let e$=()=>(0,l.jsx)(eG.d,{children:(0,l.jsxs)(eV.r,{children:[(0,l.jsxs)(eV.r.Tab,{label:"summary",children:[(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(eg.I,{source:"isForOver60s"}),(0,l.jsx)(D.n,{source:"activityLevel"})]}),(0,l.jsx)(eV.r.Tab,{label:"content",children:(0,l.jsx)(eY.U,{className:"prose",source:"content",label:!1})}),(0,l.jsx)(eV.r.Tab,{label:"tasks",path:"tasks",children:(0,l.jsx)(eX.E,{reference:"tasks",target:"programId",label:!1,children:(0,l.jsxs)(W.c,{rowClick:"edit",bulkActionButtons:!1,children:[(0,l.jsx)(eQ.K,{source:"weekNumber",textAlign:"left"}),(0,l.jsx)(er,{source:"activityId",reference:"activities",itemSource:"name"}),(0,l.jsx)(D.n,{source:"reps",textAlign:"center"}),(0,l.jsx)(eQ.K,{source:"sets",textAlign:"center"}),(0,l.jsx)(D.n,{source:"frequency",textAlign:"center"}),(0,l.jsx)(eQ.K,{source:"restPeriod",textAlign:"center"}),(0,l.jsx)(eQ.K,{source:"days",textAlign:"center"})]})})})]})});var e0=t(49802),e1=t(14356);let e2="#263039",e6={...e1.u,palette:{secondary:{main:e2}}},e5=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(l.Fragment,{}),children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(k.kv,{}),(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(et.J,{label:"Extension",textAlign:"center",render:e=>e.src.split(".").pop()}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})}),e3=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"title",fullWidth:!0,validate:[(0,C.C1)()]}),(0,l.jsx)(k.kv,{width:500})]}),e4=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(e3,{})}),e9=()=>(0,l.jsx)(f.Py,{children:(0,l.jsx)(e3,{})}),e8=[(0,l.jsx)($.D,{alwaysOn:!0,source:"programId",reference:"programs",children:(0,l.jsx)(ee.P,{sx:{width:300},label:"Select a program",optionText:e=>"".concat(e.title," - ").concat(e.isForOver60s?"Over 60s":"Under 60s"," - ").concat((0,w.G)(e.activityLevel))})},"program"),(0,l.jsx)(eA.Y,{source:"weekNumber"},"week")],e7=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0,hasBulkCreate:!0}),filters:e8,perPage:25,queryOptions:{meta:{include:{activity:!0}}},children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(eQ.K,{source:"weekNumber",textAlign:"center"}),(0,l.jsx)(er,{source:"activityId",reference:"activities",itemSource:"name"}),(0,l.jsx)(D.n,{source:"reps",textAlign:"center"}),(0,l.jsx)(eQ.K,{source:"sets",textAlign:"center"}),(0,l.jsx)(et.J,{label:"Days",textAlign:"center",render:e=>e.days.sort().join()}),(0,l.jsx)(er,{source:"programId",reference:"programs",itemSource:e=>"".concat(e.title," - ").concat(e.isForOver60s?"Over 60s":"Under 60s"," - ").concat((0,w.G)(null!==(r=e.activityLevel)&&void 0!==r?r:""))}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})});var se=t(81405);let ss=e=>{let{children:s,onProgramIdChange:t,onWeekChange:r}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($.D,{label:"Program",source:"programId",reference:"programs",children:(0,l.jsx)(ee.P,{onChange:t,optionText:e=>"".concat(e.title," - ").concat(e.isForOver60s?"Over 60s":"Under 60s"," - ").concat((0,w.G)(e.activityLevel)),fullWidth:!0,validate:(0,C.C1)()})}),(0,l.jsx)(eA.Y,{fullWidth:!0,source:"weekNumber",validate:(0,C.C1)(),onChange:e=>{console.log(e),null==r||r(e.target.value)}}),s,(0,l.jsx)($.D,{label:"Activity",source:"activityId",reference:"activities",children:(0,l.jsx)(ee.P,{optionText:"name",fullWidth:!0,validate:(0,C.C1)()})}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(eA.Y,{source:"sets"}),(0,l.jsx)(T.o,{source:"reps"}),(0,l.jsx)(T.o,{source:"restPeriod"}),(0,l.jsx)(T.o,{source:"frequency"})]}),(0,l.jsx)(se.P,{source:"days",validate:(0,C.C1)(),parse:e=>e.filter(e=>[1,2,3,4,5,6,7].includes(e)),choices:Array(7).fill(null).map((e,s)=>({id:s+1,name:"Day ".concat(s+1)}))})]})},st=e=>{let{children:s,onProgramIdChange:t,onWeekChange:r,mutationOptions:a}=e;return(0,l.jsx)(f.ck,{mutationOptions:a,children:(0,l.jsx)(ss,{onProgramIdChange:t,onWeekChange:r,children:s})})},sr=()=>(0,l.jsx)(f.Py,{children:(0,l.jsx)(ss,{})}),sl=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{}),perPage:25,children:(0,l.jsxs)(W.c,{rowClick:"edit",bulkActionButtons:!1,children:[(0,l.jsx)(D.n,{source:"email"}),(0,l.jsx)(D.n,{source:"role"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})});var sa=t(25980),si=t(57215);let sn=()=>{let e=(0,sa.j)(),{identity:s}=(0,si.k)(),t=e.guid===(null==s?void 0:s.id),r=t?"You cannot update your own role":void 0;return(0,l.jsx)(em.l,{source:"role",validate:[(0,C.C1)(),()=>r],disabled:t,helperText:r,choices:[{id:"ADMIN",name:"Admin"},{id:"PRACTITIONER",name:"Practitioner"},{id:"USER",name:"User"}]})},sc=()=>{let e=(0,sa.j)();return(0,l.jsxs)("span",{children:["User ",e?"".concat(e.email):""]})},so=()=>(0,l.jsx)(f.Py,{title:(0,l.jsx)(sc,{}),children:(0,l.jsx)(sn,{})}),sd=[(0,l.jsx)(T.o,{label:"Search by title",source:"q",alwaysOn:!0},"search")],sx=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:sd,children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})}),su=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"title",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(k.nW,{source:"heroImageId",label:"Hero Image"}),(0,l.jsx)(k.nW,{source:"thumbnailImageId",label:"Thumbnail Image"})]}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(ei.u,{source:"programs",reference:"programs",children:(0,l.jsx)(ec,{fullWidth:!0,label:"Programs",optionText:e=>"".concat(e.title," - ").concat(e.isForOver60s?"Over 60s":"Under 60s"," - ").concat((0,w.G)(e.activityLevel))})}),(0,l.jsx)(ei.u,{source:"phases",reference:"phases",children:(0,l.jsx)(ec,{fullWidth:!0,label:"Phases",optionText:"name"})})]}),(0,l.jsx)(ez,{source:"content",fullWidth:!0})]}),sj=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(su,{})}),sh=()=>(0,l.jsx)(f.Py,{queryOptions:{meta:{include:{phases:!0,programs:!0}}},children:(0,l.jsx)(su,{})}),sm=()=>{let{identity:e}=(0,si.k)(),s=null==e?void 0:e.role;return(0,l.jsxs)(f.ck,{children:[(0,l.jsx)(T.o,{fullWidth:!0,source:"email",type:"email",label:"Email address",validate:[(0,C.C1)()]}),(0,l.jsx)(em.l,{source:"role",defaultValue:"USER",validate:[(0,C.C1)()],choices:["ADMIN"===s&&{id:"ADMIN",name:"Admin"},{id:"PRACTITIONER",name:"Practitioner"},{id:"USER",name:"User"}].filter(e=>e)})]})};var sp=t(66596),sg=t(88912),sv=t(46082),sb=t(39324),sy=t(67720),sf=t(5973);let sA=()=>(0,l.jsx)(ed.Z,{textAlign:"center",m:1,sx:{width:"100%"},children:(0,l.jsx)(G.Z,{variant:"body1",paragraph:!0,children:"Create tasks for the selected program and week by filling in the fields below."})}),sI=()=>{let{spacing:e}=(0,eo.Z)(),s=(0,sp.d)(),t=(0,sg.J)(),[r,a]=(0,_.useState)(),[i,n]=(0,_.useState)(),{onError:c}=(0,sf.useFormContext)(),o=(0,_.useCallback)(()=>{s("Task created"),t()},[s,t]);return(0,l.jsx)(sv.U,{value:"tasks",children:(0,l.jsxs)(st,{mutationOptions:{onSuccess:o,onError:c},onProgramIdChange:a,onWeekChange:n,children:[r&&(0,l.jsx)(O.a,{perPage:50,filter:{programId:r,weekNumber:i},actions:!1,sx:{width:"100%"},empty:(0,l.jsx)(sA,{}),children:(0,l.jsxs)(W.c,{rowClick:"edit",bulkActionButtons:!1,children:[(0,l.jsx)(eQ.K,{source:"weekNumber",textAlign:"center"}),(0,l.jsx)(er,{source:"activityId",reference:"activities",itemSource:"name"}),(0,l.jsx)(eQ.K,{source:"sets",textAlign:"center"}),(0,l.jsx)(D.n,{source:"reps",textAlign:"center"}),(0,l.jsx)(D.n,{source:"restPeriod",textAlign:"center"}),(0,l.jsx)(D.n,{source:"frequency",textAlign:"center"}),(0,l.jsx)(et.J,{label:"Days",textAlign:"center",render:e=>e.days.sort().join()})," ",(0,l.jsx)(sb.m,{redirect:!1})]})}),(0,l.jsx)(sy.Z,{light:!0,sx:{marginBottom:e(2)}})]})})};var sw=t(66242),sk=t(78445),sT=t(77837),sC=t(23148),sN=t(49501);let sP="https://api.total-rehab.co.uk";if(!sP)throw Error("Total Rehab API base URL not set");let sZ=(0,sN.createOpenApiClient)({baseURL:sP,onError:console.error});var sO=t(44267),sW=t(26495),sD=t(13524),sS=t(81743);let sF=(e,s)=>{let t=[];for(;e<=s;)t.push(new Date(e)),e.setDate(e.getDate()+1);return t},sR=e=>{var s;let{title:t,label:r,analyticsCountByDay:a}=e,{spacing:i,palette:n}=(0,eo.Z)();if(!a)return null;let c=a.map(e=>{let{day:s}=e;return new Date(s).getTime()}),o=new Date(Math.min.apply(null,c)),d=new Date(Math.max.apply(null,c)),x=sF(o,d);return(0,l.jsxs)(sw.Z,{sx:{marginTop:i(2),padding:i(2),margin:i(2),flex:1},children:[(0,l.jsx)(sk.Z,{subheader:t}),(0,l.jsx)(sO.Z,{children:(0,l.jsx)(sW.x1,{height:300,datasetIdKey:"id",options:{maintainAspectRatio:!1,scales:{x:{ticks:{maxRotation:90,minRotation:90}}}},data:{labels:x.map(e=>(0,sD.Z)(e,"dd MMM")),datasets:[{label:r,borderColor:n.primary.main,backgroundColor:n.primary.main,data:x.map(e=>{var t;return null!==(s=null===(t=a.find(s=>(0,sS.Z)(new Date(s.day),e)))||void 0===t?void 0:t.count)&&void 0!==s?s:0})}]}})})]})};sC.kL.register(sC.uw,sC.f$,sC.u,sC.De,sC.od,sC.jn);let sB=()=>{let{spacing:e}=(0,eo.Z)(),{data:s}=(0,sT.a)(["analytics"],()=>sZ.getAnalytics());return console.log(s),(0,l.jsxs)(sw.Z,{sx:{marginTop:e(2),marginBottom:e(8)},children:[(0,l.jsx)(sk.Z,{title:"Total Rehab Dashboard"}),(0,l.jsxs)(ed.Z,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"}},children:[(0,l.jsx)(sR,{title:"New users by day",label:"New users",analyticsCountByDay:null==s?void 0:s.newUsersByDay}),(0,l.jsx)(sR,{title:"Active users by day",label:"Active users",analyticsCountByDay:null==s?void 0:s.activeUsersByDay})]}),(0,l.jsxs)(ed.Z,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"}},children:[(0,l.jsx)(sR,{title:"Programs started by day",label:"Programs started",analyticsCountByDay:null==s?void 0:s.programsStartedByDay}),(0,l.jsx)(sR,{title:"Completed tasks by day",label:"Completed tasks",analyticsCountByDay:null==s?void 0:s.completedTasksByDay})]})]})},sE=[(0,l.jsx)(T.o,{label:"Search by title",source:"q",alwaysOn:!0},"search")],sq=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:sE,children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})}),sL=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"title",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(k.nW,{source:"heroImageId",label:"Hero Image"}),(0,l.jsx)(k.nW,{source:"thumbnailImageId",label:"Thumbnail Image"})]}),(0,l.jsx)(ez,{source:"content",fullWidth:!0})]}),sM=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(sL,{})}),sU=()=>(0,l.jsx)(f.Py,{queryOptions:{meta:{include:{phases:!0,programs:!0}}},children:(0,l.jsx)(sL,{})}),sz=[(0,l.jsx)(T.o,{label:"Search by title",source:"q",alwaysOn:!0},"search")],sH=()=>(0,l.jsx)(O.a,{actions:(0,l.jsx)(U,{hasFilters:!0}),perPage:25,filters:sz,children:(0,l.jsxs)(W.c,{rowClick:"edit",children:[(0,l.jsx)(D.n,{source:"title"}),(0,l.jsx)(S.N,{source:"createdAt",textAlign:"center",showTime:!0}),(0,l.jsx)(S.N,{source:"updatedAt",textAlign:"center",showTime:!0}),(0,l.jsx)(D.n,{source:"id",textAlign:"center"})]})}),s_=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.o,{source:"title",validate:[(0,C.C1)()],fullWidth:!0}),(0,l.jsxs)(ex,{children:[(0,l.jsx)(k.nW,{source:"heroImageId",label:"Hero Image"}),(0,l.jsx)(k.nW,{source:"thumbnailImageId",label:"Thumbnail Image"})]}),(0,l.jsx)(ez,{source:"content",fullWidth:!0})]}),sJ=()=>(0,l.jsx)(f.ck,{children:(0,l.jsx)(s_,{})}),sK=()=>(0,l.jsx)(f.Py,{queryOptions:{meta:{include:{phases:!0,programs:!0}}},children:(0,l.jsx)(s_,{})}),sG=(0,e0.eI)("https://bflvfyeppolxjouqqaxp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJmbHZmeWVwcG9seGpvdXFxYXhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzI4NTU2NjQsImV4cCI6MTk4ODQzMTY2NH0.cBu6dbiT0UsR4m1y9VdYjJH39T_3XVarDBbGRVRMi8E"),sV=(0,A.I)(sG),sY=(0,I.d8)("https://api.total-rehab.co.uk",{fetch:sV}),sX=(0,c.Sy)(sG,{acceptedRoles:["ADMIN"],getIdentity:async e=>{var s;let{data:t,error:r}=await sG.from("User").select("name, role").eq("guid",e.id),{name:l,role:a}=null!==(s=null==t?void 0:t[0])&&void 0!==s?s:{},{id:i,email:n}=e;return{id:i,fullName:null!=l?l:n,email:n,role:a}}}),sQ=async e=>{let s={};if(!(0,I.o0)(e))throw e;return e.errors?e.errors.reduce((e,s)=>({...e,[s.property]:(0,w.G)(s.message)}),s):s},s$=e=>{let{appEnv:s}=e;return(0,l.jsx)(k.oE,{croppable:!0,convertFileName:!0,supabase:sG,resource:"media",bucket:"images",bucketFolder:"public",accept:["image/*","video/*"],maxSize:"production"===s?1e9:5e7,aspectRatio:"3 / 2",sort:{field:"createdAt",order:"desc"},resizeOptions:{maxSizeMB:1,maxWidthOrHeight:1920},children:(0,l.jsx)(f.RV,{onError:sQ,children:(0,l.jsxs)(a.w,{basename:"/admin",theme:e6,dataProvider:sY,authProvider:sX,layout:Q,dashboard:sB,loginPage:(0,l.jsx)(c.Xs,{background:e2}),children:[(0,l.jsx)(i._,{name:"programs",list:ey,create:eJ,edit:eK,show:e$,icon:h.Z}),(0,l.jsx)(i._,{name:"tasks",list:e7,create:st,edit:sr,icon:u.Z}),(0,l.jsx)(i._,{name:"activities",list:ea,create:ej,edit:eh,icon:x.Z}),(0,l.jsx)(i._,{name:"modalities",list:H,create:P,edit:Z,icon:y.Z}),(0,l.jsx)(i._,{name:"equipment",list:H,create:P,edit:Z,icon:d.Z}),(0,l.jsx)(i._,{name:"phases",list:H,create:P,edit:Z,icon:j.Z}),(0,l.jsx)(i._,{name:"media",options:{label:"Media Library"},list:e5,create:e4,edit:e9,icon:m.Z}),(0,l.jsx)(i._,{name:"guides",list:sx,create:sj,edit:sh,icon:p.Z}),(0,l.jsx)(i._,{name:"blog-posts",options:{label:"Blog Posts"},list:sq,create:sM,edit:sU,icon:g.Z}),(0,l.jsx)(i._,{name:"plans",list:sH,create:sJ,edit:sK,icon:v.Z}),(0,l.jsx)(i._,{name:"users",list:sl,edit:so,create:sm,icon:b.Z}),(0,l.jsx)(n.G,{children:(0,l.jsx)(o.AW,{path:"bulk-create/tasks",element:(0,l.jsx)(sI,{})})})]})})})};var s0=s$},24654:function(){}}]);